<!-- src/app/features/dashboard/dashboard.component.html - VERSION AVEC DOCUMENTS -->
<div class="dashboard-container">
  
  <!-- Header -->
  <mat-toolbar class="dashboard-header" color="primary">
    <button mat-icon-button (click)="toggleSidenav()">
      <mat-icon>menu</mat-icon>
    </button>
    
    <span class="header-title">GED Dashboard</span>
    
    <span class="spacer"></span>
    
    <!-- Actions rapides -->
    <button mat-icon-button (click)="uploadDocument()" matTooltip="Upload rapide">
      <mat-icon>cloud_upload</mat-icon>
    </button>
    
    <!-- Refresh -->
    <button mat-icon-button (click)="refreshDashboard()" matTooltip="Actualiser">
      <mat-icon>refresh</mat-icon>
    </button>
    
    <!-- User Menu -->
    <button mat-icon-button [matMenuTriggerFor]="userMenu">
      <mat-icon>account_circle</mat-icon>
    </button>
    <mat-menu #userMenu="matMenu">
      <button mat-menu-item>
        <mat-icon>person</mat-icon>
        <span>Profil</span>
      </button>
      <button mat-menu-item>
        <mat-icon>settings</mat-icon>
        <span>Param√®tres</span>
      </button>
      <mat-divider></mat-divider>
      <button mat-menu-item (click)="logout()">
        <mat-icon>logout</mat-icon>
        <span>D√©connexion</span>
      </button>
    </mat-menu>
  </mat-toolbar>

  <!-- Sidebar + Content -->
  <mat-sidenav-container class="dashboard-content">
    <mat-sidenav #sidenav [opened]="sidenavOpened" mode="side" class="dashboard-sidenav">
      <!-- Navigation -->
      <div class="sidenav-header">
        <mat-icon>dashboard</mat-icon>
        <span>Menu Principal</span>
      </div>
      <mat-divider></mat-divider>
      
      <mat-nav-list>
        <a mat-list-item routerLink="/dashboard" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}">
          <mat-icon matListIcon>dashboard</mat-icon>
          <span>Tableau de bord</span>
        </a>
        
        <!-- üî• NOUVELLE SECTION DOCUMENTS -->
        <h3 mat-subheader>Gestion Documentaire</h3>
        
        <a mat-list-item routerLink="/documents" routerLinkActive="active">
          <mat-icon matListIcon>folder</mat-icon>
          <span>Tous les Documents</span>
          <mat-chip class="nav-counter">{{ stats.documents }}</mat-chip>
        </a>
        
        <a mat-list-item (click)="uploadDocument()">
          <mat-icon matListIcon>cloud_upload</mat-icon>
          <span>Upload Document</span>
        </a>
        
        <a mat-list-item routerLink="/categories" routerLinkActive="active">
          <mat-icon matListIcon>category</mat-icon>
          <span>Cat√©gories</span>
          <mat-chip class="nav-counter">{{ stats.categories }}</mat-chip>
        </a>
        
        <mat-divider></mat-divider>
        
        <!-- SECTION ADMINISTRATION -->
        <h3 mat-subheader>Administration</h3>
        
        <a mat-list-item routerLink="/users" routerLinkActive="active">
          <mat-icon matListIcon>people</mat-icon>
          <span>Utilisateurs</span>
          <mat-chip class="nav-counter">{{ stats.users }}</mat-chip>
        </a>
        
        <a mat-list-item routerLink="/settings" routerLinkActive="active">
          <mat-icon matListIcon>settings</mat-icon>
          <span>Param√®tres</span>
        </a>
      </mat-nav-list>
    </mat-sidenav>

    <!-- Main Content -->
    <mat-sidenav-content class="main-content">
      
      <!-- Loading -->
      <div *ngIf="loading" class="loading-container">
        <mat-spinner diameter="50"></mat-spinner>
        <p>Chargement du tableau de bord...</p>
      </div>

      <!-- Dashboard Content -->
      <div *ngIf="!loading" class="dashboard-main">
        
        <!-- Welcome Section -->
        <div class="welcome-section">
          <h1>Bienvenue, {{ currentUser?.first_name || currentUser?.username }}!</h1>
          <p>Voici un aper√ßu de votre syst√®me de gestion documentaire</p>
        </div>

        <!-- Statistics Cards -->
        <div class="stats-grid">
          
          <!-- Documents Stats -->
          <mat-card class="stat-card documents-card" (click)="goToDocuments()">
            <mat-card-content>
              <div class="stat-header">
                <mat-icon class="stat-icon">folder</mat-icon>
                <div class="stat-actions">
                  <button mat-icon-button (click)="uploadDocument(); $event.stopPropagation()">
                    <mat-icon>add</mat-icon>
                  </button>
                </div>
              </div>
              <div class="stat-content">
                <h2>{{ stats.documents }}</h2>
                <p>Documents Total</p>
                <small *ngIf="stats.recentDocuments > 0">
                  {{ stats.recentDocuments }} nouveaux cette semaine
                </small>
              </div>
            </mat-card-content>
          </mat-card>
          
          <!-- Categories Stats -->
          <mat-card class="stat-card categories-card" (click)="goToCategories()">
            <mat-card-content>
              <div class="stat-header">
                <mat-icon class="stat-icon">category</mat-icon>
              </div>
              <div class="stat-content">
                <h2>{{ stats.categories }}</h2>
                <p>Cat√©gories</p>
                <small>Organisation des documents</small>
              </div>
            </mat-card-content>
          </mat-card>
          
          <!-- Users Stats -->
          <mat-card class="stat-card users-card" (click)="goToUsers()">
            <mat-card-content>
              <div class="stat-header">
                <mat-icon class="stat-icon">people</mat-icon>
              </div>
              <div class="stat-content">
                <h2>{{ stats.users }}</h2>
                <p>Utilisateurs</p>
                <small>Acc√®s au syst√®me</small>
              </div>
            </mat-card-content>
          </mat-card>
          
          <!-- Quick Actions Card -->
          <mat-card class="stat-card actions-card">
            <mat-card-content>
              <div class="stat-header">
                <mat-icon class="stat-icon">flash_on</mat-icon>
              </div>
              <div class="stat-content">
                <h3>Actions Rapides</h3>
                <div class="quick-actions">
                  <button mat-mini-fab color="primary" (click)="uploadDocument()" matTooltip="Upload">
                    <mat-icon>cloud_upload</mat-icon>
                  </button>
                  <button mat-mini-fab color="accent" (click)="goToDocuments()" matTooltip="Parcourir">
                    <mat-icon>search</mat-icon>
                  </button>
                </div>
              </div>
            </mat-card-content>
          </mat-card>
        </div>

        <!-- Recent Documents Section -->
        <div class="content-grid">
          
          <!-- Documents R√©cents -->
          <mat-card class="content-card recent-documents">
            <mat-card-header>
              <mat-card-title>
                <mat-icon>schedule</mat-icon>
                Documents R√©cents
              </mat-card-title>
              <div class="card-actions">
                <button mat-button (click)="goToDocuments()">Voir tout</button>
              </div>
            </mat-card-header>
            
            <mat-card-content>
              <div *ngIf="recentDocuments.length === 0" class="empty-state">
                <mat-icon>folder_open</mat-icon>
                <p>Aucun document r√©cent</p>
                <button mat-raised-button color="primary" (click)="uploadDocument()">
                  Cr√©er le premier document
                </button>
              </div>
              
              <div *ngIf="recentDocuments.length > 0" class="documents-list">
                <div *ngFor="let doc of recentDocuments" 
                     class="document-item" 
                     (click)="viewDocument(doc.id)">
                  <div class="document-info">
                    <mat-icon class="document-icon">description</mat-icon>
                    <div class="document-details">
                      <h4>{{ doc.title }}</h4>
                      <p>Par {{ doc.creator_name }} ‚Ä¢ {{ formatDate(doc.created_at) }}</p>
                    </div>
                  </div>
                  <div class="document-status">
                    <mat-chip [class]="getStatusClass(doc.status)">
                      {{ getStatusLabel(doc.status) }}
                    </mat-chip>
                  </div>
                </div>
              </div>
            </mat-card-content>
          </mat-card>

          <!-- Categories Overview -->
          <mat-card class="content-card categories-overview">
            <mat-card-header>
              <mat-card-title>
                <mat-icon>category</mat-icon>
                Cat√©gories
              </mat-card-title>
              <div class="card-actions">
                <button mat-button (click)="goToCategories()">G√©rer</button>
              </div>
            </mat-card-header>
            
            <mat-card-content>
              <div *ngIf="categories.length === 0" class="empty-state">
                <mat-icon>category</mat-icon>
                <p>Aucune cat√©gorie</p>
              </div>
              
              <div *ngIf="categories.length > 0" class="categories-list">
                <div *ngFor="let category of categories.slice(0, 5)" class="category-item">
                  <div class="category-info">
                    <mat-icon>folder</mat-icon>
                    <div class="category-details">
                      <h4>{{ category.name }}</h4>
                      <p>{{ category.description || 'Aucune description' }}</p>
                    </div>
                  </div>
                  <div class="category-count">
                    <mat-chip>{{ category.document_count || 0 }}</mat-chip>
                  </div>
                </div>
              </div>
            </mat-card-content>
          </mat-card>
        </div>

        <!-- Actions rapides en bas -->
        <div class="bottom-actions">
          <mat-card class="actions-card-bottom">
            <mat-card-content>
              <h3>Actions Fr√©quentes</h3>
              <div class="action-buttons">
                <button mat-raised-button color="primary" (click)="uploadDocument()">
                  <mat-icon>cloud_upload</mat-icon>
                  Uploader un Document
                </button>
                <button mat-stroked-button (click)="goToDocuments()">
                  <mat-icon>search</mat-icon>
                  Rechercher des Documents
                </button>
                <button mat-stroked-button (click)="goToUsers()">
                  <mat-icon>person_add</mat-icon>
                  G√©rer les Utilisateurs
                </button>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
      </div>
    </mat-sidenav-content>
  </mat-sidenav-container>
</div>